<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.firstzone.myapp.emp">
  <select id ="loginChk" resultType="empvo" parameterType="String">
  	select employee_id, first_name, last_name, phone_number from employees where email = #{aa}
  </select>
  
  <select id="selectAll" resultType="org.firstzone.myapp.emp.EmpDTO">
    select * from employees
  </select>
  
  <select id="selectById" parameterType="int" resultType="empvo">
    select * from employees where employee_id=#{employee_id}
  </select>
  
  <insert id="empInsert" parameterType="empvo">
  	insert into employees(employee_id,first_name,last_name,email,phone_number,hire_date,job_id,salary,commission_pct,manager_id,department_id) values(#{employee_id},#{first_name},#{last_name},#{email},#{phone_number},#{hire_date},#{job_id},#{salary},#{commission_pct},#{manager_id},#{department_id})
  </insert>
  
  <update id="empUpdate" parameterType="empvo">
  	update employees set
  	first_name=#{first_name},last_name=#{last_name},
  	email=#{email},phone_number=#{phone_number},
	hire_date=#{hire_date},job_id=#{job_id},
	salary=#{salary},commission_pct=#{commission_pct},
	manager_id=#{manager_id},department_id=#{department_id} where employee_id=#{employee_id}
  </update>
  
  <delete id="empDelete" parameterType="int">
  	delete from employees where employee_id=#{employee_id}
  </delete>
  
  <select id="selectByCondition" parameterType="map" resultType="empvo">
  	select * from employees where department_id= #{department_id}
  	 and job_id = #{job_id} and hire_date>=#{hire_date} and salary>=#{salary}
  </select>
  
  <select id="selectByJobid" parameterType="String" resultType="empvo">
  	select * from employees where job_id like #{job_id}
  </select>
  
  <select id="selectByEmail" parameterType="int" resultType="int">
   select 1 from employees where email=#{email}
  </select>
  
  <select id="selectAllJob" resultType="org.firstzone.myapp.emp.JobDTO">
  	select * from jobs
  </select>
  
  <select id="selectAllManager" resultType="map">
   select employee_id as "employee_id", first_name||' '||last_name as "fullname" from employees where employee_id in(select distinct manager_id from employees where manager_id is not null)
  </select>
  
  <select id="selectByDepId" parameterType="int">
  	select * from employees where department_id=#{department_id}
  </select>
</mapper>